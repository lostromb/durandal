<?xml version="1.0"?>
<grammar version="1.0">
  <regex id="reBoundary" scope="public" expression="(?:\b)" />
  <regex id="reNumber" scope="public" expression="([1-4]?[0-9])" /> 
  <regex id="reNumberTh" scope="public" expression="([0-9]+(?:st|nd|rd|th))" />
  <regex id="reNumberWord" scope="public" expression="(one|two|three|four|five|six|seven|eight|nine|ten|eleven|twelve|thirteen|fourteen|fifteen|sixteen|seventeen|eighteen|nine?teen|twenty)" />
  <regex id="reNumberWordTh" scope="public" expression="(first|second|third|fou?rth|fifth|sixth|seventh|eighth|nineth|tenth|eleventh|twelfth|thirteenth|fourteenth|fifteenth|sixteenth|seventeenth|eighteenth|nineteenth|twentieth|twenty[ -]first|twenty[ -]second|twenty[ -]third|twenty[ -]fourth|twenty[ -]fifth|twenty[ -]sixth|twenty[ -]seventh|twenty[ -]eighth|twenty[ -]nineth|thirtieth|thirty[ -]first)" />
  <regex id="reOrdinalWord" scope="public" expression="(top|bottom|last)(?=\b)" />
  <regex id="reItemType" scope="public" expression="(one|item|result|thing|entry|page)" />
  
  <normalization_rule id="ordinalWord" strict="true">
    <item input="top" output="TOP" />
    <item input="bottom" output="BOTTOM" />
    <item input="last" output="LAST" />
  </normalization_rule>
  
  <normalization_rule id="ordinalNum" strict="false">
    <item input="0" output="0" />
    <item input="00" output="0" />
    <item input="1" output="1" />
    <item input="01" output="1" />
    <item input="2" output="2" />
    <item input="02" output="2" />
    <item input="3" output="3" />
    <item input="03" output="3" />
    <item input="4" output="4" />
    <item input="04" output="4" />
    <item input="5" output="5" />
    <item input="05" output="5" />
    <item input="6" output="6" />
    <item input="06" output="6" />
    <item input="7" output="7" />
    <item input="07" output="7" />
    <item input="8" output="8" />
    <item input="08" output="8" />
    <item input="9" output="9" />
    <item input="09" output="9" />
    <item input="10" output="10" />
    <item input="11" output="11" />
    <item input="12" output="12" />
    <item input="13" output="13" />
    <item input="14" output="14" />
    <item input="15" output="15" />
    <item input="16" output="16" />
    <item input="17" output="17" />
    <item input="18" output="18" />
    <item input="19" output="19" />
    <item input="20" output="20" />
    <item input="21" output="21" />
    <item input="22" output="22" />
    <item input="23" output="23" />
    <item input="24" output="24" />
    <item input="25" output="25" />
    <item input="26" output="26" />
    <item input="27" output="27" />
    <item input="28" output="28" />
    <item input="29" output="29" />
    <item input="30" output="30" />
    <item input="31" output="31" />
    <item input="first" output="1" />
    <item input="second" output="2" />
    <item input="third" output="3" />
    <item input="forth" output="4" />
    <item input="fourth" output="4" />
    <item input="fifth" output="5" />
    <item input="sixth" output="6" />
    <item input="seventh" output="7" />
    <item input="eighth" output="8" />
    <item input="ninth" output="9" />
    <item input="tenth" output="10" />
    <item input="eleventh" output="11" />
    <item input="twelfth" output="12" />
    <item input="thirteenth" output="13" />
    <item input="fourteenth" output="14" />
    <item input="fifteenth" output="15" />
    <item input="sixteenth" output="16" />
    <item input="seventeenth" output="17" />
    <item input="eighteenth" output="18" />
    <item input="nineteenth" output="19" />
    <item input="twentieth" output="20" />
    <item input="twenty-first" output="21" />
    <item input="twenty first" output="21" />
    <item input="twenty-second" output="22" />
    <item input="twenty second" output="22" />
    <item input="twenty-third" output="23" />
    <item input="twenty third" output="23" />
    <item input="twenty-fourth" output="24" />
    <item input="twenty fourth" output="24" />
    <item input="twenty-forth" output="24" />
    <item input="twenty-fifth" output="25" />
    <item input="twenty fifth" output="25" />
    <item input="twenty-sixth" output="26" />
    <item input="twenty sixth" output="26" />
    <item input="twenty-seventh" output="27" />
    <item input="twenty seventh" output="27" />
    <item input="twenty-eighth" output="28" />
    <item input="twenty eighth" output="28" />
    <item input="twenty-ninth" output="29" />
    <item input="twenty ninth" output="29" />
    <item input="thirtieth" output="30" />
    <item input="thirty-first" output="31" />
    <item input="thirty first" output="31" />
    <item input="1st" output="1" />
    <item input="2nd" output="2" />
    <item input="3rd" output="3" />
    <item input="4th" output="4" />
    <item input="5th" output="5" />
    <item input="6th" output="6" />
    <item input="7th" output="7" />
    <item input="8th" output="8" />
    <item input="9th" output="9" />
    <item input="10th" output="10" />
    <item input="11th" output="11" />
    <item input="12th" output="12" />
    <item input="13th" output="13" />
    <item input="14th" output="14" />
    <item input="15th" output="15" />
    <item input="16th" output="16" />
    <item input="17th" output="17" />
    <item input="18th" output="18" />
    <item input="19th" output="19" />
    <item input="20th" output="20" />
    <item input="21st" output="21" />
    <item input="22nd" output="22" />
    <item input="23rd" output="23" />
    <item input="24th" output="24" />
    <item input="25th" output="25" />
    <item input="26th" output="26" />
    <item input="27th" output="27" />
    <item input="28th" output="28" />
    <item input="29th" output="29" />
    <item input="30th" output="30" />
    <item input="31st" output="31" />
    <item input="one" output="1" />
    <item input="two" output="2" />
    <item input="three" output="3" />
    <item input="four" output="4" />
    <item input="five" output="5" />
    <item input="six" output="6" />
    <item input="seven" output="7" />
    <item input="eight" output="8" />
    <item input="nine" output="9" />
    <item input="ten" output="10" />
    <item input="eleven" output="11" />
    <item input="twelve" output="12" />
    <item input="thirteen" output="13" />
    <item input="fourteen" output="14" />
    <item input="fifteen" output="15" />
    <item input="sixteen" output="16" />
    <item input="seventeen" output="17" />
    <item input="eighteen" output="18" />
    <item input="nineteen" output="19" />
    <item input="twenty" output="20" />
    <item input="twenty-one" output="21" />
    <item input="twenty-two" output="22" />
    <item input="twenty-three" output="23" />
    <item input="twenty-four" output="24" />
    <item input="twenty-five" output="25" />
    <item input="twenty-six" output="26" />
    <item input="twenty-seven" output="27" />
    <item input="twenty-eight" output="28" />
    <item input="twenty-nine" output="29" />
    <item input="twenty one" output="21" />
    <item input="twenty two" output="22" />
    <item input="twenty three" output="23" />
    <item input="twenty four" output="24" />
    <item input="twenty five" output="25" />
    <item input="twenty six" output="26" />
    <item input="twenty seven" output="27" />
    <item input="twenty eight" output="28" />
    <item input="twenty nine" output="29" />
    <item input="thirty" output="30" />
    <item input="thirty-one" output="31" />
    <item input="thirty-two" output="32" />
    <item input="thirty-three" output="33" />
    <item input="thirty-four" output="34" />
    <item input="thirty-five" output="35" />
    <item input="thirty-six" output="36" />
    <item input="thirty-seven" output="37" />
    <item input="thirty-eight" output="38" />
    <item input="thirty-nine" output="39" />
    <item input="thirty one" output="31" />
    <item input="thirty two" output="32" />
    <item input="thirty three" output="33" />
    <item input="thirty four" output="34" />
    <item input="thirty five" output="35" />
    <item input="thirty six" output="36" />
    <item input="thirty seven" output="37" />
    <item input="thirty eight" output="38" />
    <item input="thirty nine" output="39" />
    <item input="forty" output="40" />
    <item input="forty-one" output="41" />
    <item input="forty-two" output="42" />
    <item input="forty-three" output="43" />
    <item input="forty-four" output="44" />
    <item input="forty-five" output="45" />
    <item input="forty-six" output="46" />
    <item input="forty-seven" output="47" />
    <item input="forty-eight" output="48" />
    <item input="forty-nine" output="49" />
    <item input="forty one" output="41" />
    <item input="forty two" output="42" />
    <item input="forty three" output="43" />
    <item input="forty four" output="44" />
    <item input="forty five" output="45" />
    <item input="forty six" output="46" />
    <item input="forty seven" output="47" />
    <item input="forty eight" output="48" />
    <item input="forty nine" output="49" />
    <item input="fifty" output="50" />
    <item input="fifty-one" output="51" />
    <item input="fifty-two" output="52" />
    <item input="fifty-three" output="53" />
    <item input="fifty-four" output="54" />
    <item input="fifty-five" output="55" />
    <item input="fifty-six" output="56" />
    <item input="fifty-seven" output="57" />
    <item input="fifty-eight" output="58" />
    <item input="fifty-nine" output="59" />
    <item input="fifty one" output="51" />
    <item input="fifty two" output="52" />
    <item input="fifty three" output="53" />
    <item input="fifty four" output="54" />
    <item input="fifty five" output="55" />
    <item input="fifty six" output="56" />
    <item input="fifty seven" output="57" />
    <item input="fifty eight" output="58" />
    <item input="fifty nine" output="59" />
    <item input="sixty" output="60" />
    <item input="sixty-one" output="61" />
    <item input="sixty-two" output="62" />
    <item input="sixty-three" output="63" />
    <item input="sixty-four" output="64" />
    <item input="sixty-five" output="65" />
    <item input="sixty-six" output="66" />
    <item input="sixty-seven" output="67" />
    <item input="sixty-eight" output="68" />
    <item input="sixty-nine" output="69" />
    <item input="sixty one" output="61" />
    <item input="sixty two" output="62" />
    <item input="sixty three" output="63" />
    <item input="sixty four" output="64" />
    <item input="sixty five" output="65" />
    <item input="sixty six" output="66" />
    <item input="sixty seven" output="67" />
    <item input="sixty eight" output="68" />
    <item input="sixty nine" output="69" />
    <item input="seventy" output="70" />
    <item input="seventy-one" output="71" />
    <item input="seventy-two" output="72" />
    <item input="seventy-three" output="73" />
    <item input="seventy-four" output="74" />
    <item input="seventy-five" output="75" />
    <item input="seventy-six" output="76" />
    <item input="seventy-seven" output="77" />
    <item input="seventy-eight" output="78" />
    <item input="seventy-nine" output="79" />
    <item input="seventy one" output="71" />
    <item input="seventy two" output="72" />
    <item input="seventy three" output="73" />
    <item input="seventy four" output="74" />
    <item input="seventy five" output="75" />
    <item input="seventy six" output="76" />
    <item input="seventy seven" output="77" />
    <item input="seventy eight" output="78" />
    <item input="seventy nine" output="79" />
    <item input="eighty" output="80" />
    <item input="eighty-one" output="81" />
    <item input="eighty-two" output="82" />
    <item input="eighty-three" output="83" />
    <item input="eighty-four" output="84" />
    <item input="eighty-five" output="85" />
    <item input="eighty-six" output="86" />
    <item input="eighty-seven" output="87" />
    <item input="eighty-eight" output="88" />
    <item input="eighty-nine" output="89" />
    <item input="eighty one" output="81" />
    <item input="eighty two" output="82" />
    <item input="eighty three" output="83" />
    <item input="eighty four" output="84" />
    <item input="eighty five" output="85" />
    <item input="eighty six" output="86" />
    <item input="eighty seven" output="87" />
    <item input="eighty eight" output="88" />
    <item input="eighty nine" output="89" />
    <item input="ninety" output="90" />
    <item input="ninety-one" output="91" />
    <item input="ninety-two" output="92" />
    <item input="ninety-three" output="93" />
    <item input="ninety-four" output="94" />
    <item input="ninety-five" output="95" />
    <item input="ninety-six" output="96" />
    <item input="ninety-seven" output="97" />
    <item input="ninety-eight" output="98" />
    <item input="ninety-nine" output="99" />
    <item input="ninety one" output="91" />
    <item input="ninety two" output="92" />
    <item input="ninety three" output="93" />
    <item input="ninety four" output="94" />
    <item input="ninety five" output="95" />
    <item input="ninety six" output="96" />
    <item input="ninety seven" output="97" />
    <item input="ninety eight" output="98" />
    <item input="ninety nine" output="99" />
  </normalization_rule>
  
  <!-- POSITIVE RULES -->
  
  <rule id="the_nth_item" scope="public" example="the first one">
    <item>the</item>
    <one-of>
      <item><ruleref uri="#reNumberTh" /></item>
      <item><ruleref uri="#reNumberWordTh" /></item>
      <normalizer>ordinalNum</normalizer>
    </one-of>
    <item><ruleref uri="#reItemType" /></item>
  </rule>
  
  <rule id="the_top_item" scope="public" example="the top one">
    <item>the</item>
    <item><ruleref uri="#reOrdinalWord" /><normalizer>ordinalWord</normalizer></item>
    <item><ruleref uri="#reItemType" /></item>
    <item><ruleref uri="#reBoundary" /></item>
  </rule>
  
  <rule id="number_n" scope="public" example="number six">
    <item>number</item>
    <one-of>
        <item><ruleref uri="#reNumber" /></item>
        <item><ruleref uri="#reNumberWord" /></item>
        <normalizer>ordinalNum</normalizer>
      </one-of>
    <item><ruleref uri="#reBoundary" /></item>
  </rule>
  
  <rule id="hash_n" scope="public" example="#6">
    <item>#</item>
	<item><ruleref uri="#reNumber" /><normalizer>ordinalNum</normalizer></item>
    <item><ruleref uri="#reBoundary" /></item>
  </rule>
  
  <rule id="number_alone" scope="public" example="first">
    <item><ruleref uri="#reBoundary" /></item>
    <one-of>
        <item><ruleref uri="#reNumber" /></item>
        <item><ruleref uri="#reNumberTh" /></item>
        <item><ruleref uri="#reNumberWord" /></item>
        <item><ruleref uri="#reNumberWordTh" /></item>
        <normalizer>ordinalNum</normalizer>
      </one-of>
    <item><ruleref uri="#reBoundary" /></item>
  </rule>
  
  <rule id="word_alone" scope="public" example="top">
    <item><ruleref uri="#reBoundary" /></item>
    <item><ruleref uri="#reOrdinalWord" /><normalizer>ordinalWord</normalizer></item>
    <item><ruleref uri="#reBoundary" /></item>
  </rule>
  
  <!-- NEGATIVE RULES -->
  
  <negative_rule id="street_address" scope="public" example="first avenue">
    <one-of>
      <item><ruleref uri="#reNumberTh" /></item>
      <item><ruleref uri="#reNumberWordTh" /></item>
      <item><ruleref uri="#reOrdinalWord" /></item>
    </one-of>
    <one-of>
		<item>avenue</item>
		<item>street</item>
		<item>boulevard</item>
		<item>st.</item>
		<item>ave.</item>
		<item>blvd.</item>
		<item>st</item>
		<item>ave</item>
		<item>blvd</item>
	</one-of>
    <item><ruleref uri="#reBoundary" /></item>
  </negative_rule>
  
  <negative_rule id="street_address2" scope="public" example="one in">
    <item>one</item>
    <one-of>
      <item>in</item>
      <item>on</item>
    </one-of>
  </negative_rule>
  
  <negative_rule id="street_address3" scope="public" example="in one">
    <one-of>
      <item>in</item>
      <item>on</item>
    </one-of>
    <item>one</item>
  </negative_rule>
</grammar>
